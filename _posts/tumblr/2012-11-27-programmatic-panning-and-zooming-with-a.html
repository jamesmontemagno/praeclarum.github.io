---
layout: post
title:  "Programmatic Panning and Zooming with a UIScrollView"
date:   2012-11-27 17:57:00 GMT
redirect_from:
  - /post/36673962005
  - /post/36673962005/programmatic-panning-and-zooming-with-a
---


<p>Let&rsquo;s say you have a zoomable and scrollable UIScrollView all setup in your app. Great! Good job. But how do you programmatically zoom in on something particular? (For example, you may want to pan and zoom into an object that was double tapped.)</p>


<p>UIScrollView exposes the <strong>SetZoomScale</strong> and <strong>ScrollRectToVisible</strong> methods, each of which can be animated. These are the methods that you will use but getting them to work together is a bit tricky. There was a lot of trial and error when I tried to get them to work together so I thought I would share my solution with you.</p>


<p><strong>Step 1. Determine a rect that bounds the content you want to zoom into.</strong></p>

<pre>var contentFrame = new RectangleF (x, y, width, height);
var scrollFrame = contentView.ConvertRectToView (contentFrame, scrollView);</pre>

<p>First, we determine a bounding box for the content that we want to zoom into. Let&rsquo;s call it <em>contentFrame</em>.</p>


<p>We will also convert that bounding box to the coordinate system of the scroll view for use later.</p>


<p><strong>Step 2. Determine the new zoom scale.</strong></p>

<pre>var desiredZoomScale = 2;
var zooming = Math.Abs (scrollView.ZoomScale - desiredZoomScale) &gt; 0.05f;</pre>

<p>Now, determine the new desired zoom scale. This will depend on your app logic and perhaps on the contentFrame from Step 1. It&rsquo;s very app-specific, so I&rsquo;ll leave it at that for now.</p>


<p>We will also record whether the zoom needs to happen by comparing the desired zoom scale and the current zoom scale. We&rsquo;re going to need to know this to work our magic in Step 3.</p>


<p><strong>Step 3. Animate the pan and zoom.</strong></p>

<pre>if (zooming) {
    scrollView.SetZoomScale (desiredZoomScale, true);
}
scrollView.ScrollRectToVisible (scrollFrame, !zooming);</pre>

<p>The trick here is to perform the zoom operation before the pan operation and to toggle the automatic animation system depending on whether we&rsquo;re zooming or not.</p>


<p><strong>If we are zooming:</strong> Then tell SetZoomScale to animate and ScrollRectToVisible not to animate.</p>


<p><strong>If we are only panning:</strong> Then don&rsquo;t call SetZoomScale but do tell ScrollRectToVisible to animate.</p>


<p>If you follow this simple procedure you will end up with nice smooth animations. If you don&rsquo;t, well, the results can be a bit jarring. Enjoy!</p>

